<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <title>COACH TECH 2026 ULTIMATE</title>
    <style>
        /* --- æ——è‰¦å…¨åŸŸè®Šæ•¸ --- */
        :root {
            --m-bg: #0d1117;
            --m-panel: #161b22;
            --m-text: #ffffff;
            --m-primary: #00a2ff;
            --m-secondary: #4cd964;
            --m-red: #ff3b30;
            --m-orange: #ff9500;
            --m-border: #30363d;
            --key-bg: #1c222d;
        }

        /* --- ä¸»å°è¦½ä½ˆå±€ --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html, body { margin: 0; padding: 0; height: 100dvh; width: 100%; overflow: hidden; background: var(--m-bg); font-family: -apple-system, system-ui, sans-serif; color: var(--m-text); }
        
        .app-shell { display: flex; flex-direction: column; height: 100dvh; width: 100%; }
        .content-area { flex: 1; position: relative; overflow: hidden; }
        .page-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none; flex-direction: column; }
        .page-container.active { display: flex; }

        .bottom-nav { 
            height: calc(65px + env(safe-area-inset-bottom)); 
            background: #05070a; border-top: 1px solid var(--m-border); 
            display: flex; justify-content: space-around; align-items: center; 
            padding-bottom: env(safe-area-inset-bottom); z-index: 1000;
        }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #555; font-size: 11px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .nav-item.active { color: var(--m-primary); }
        .nav-icon { font-size: 20px; margin-bottom: 2px; }

        /* --- åˆ†é å…±ç”¨æ¨£å¼ (è¡¨æ ¼/æŒ‰éˆ•/é¢æ¿) --- */
        .page-header { padding: calc(12px + env(safe-area-inset-top)) 15px 5px; flex-shrink: 0; }
        .page-header h1 { font-size: 1.1rem; margin: 0; color: var(--m-primary); font-weight: 900; }
        .main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; padding: 0 15px 10px; gap: 8px; }
        .table-container { flex: 1; background: var(--m-panel); border-radius: 12px; overflow-y: auto; border: 1px solid var(--m-border); }
        table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        th { background: #05070a; position: sticky; top: 0; z-index: 5; padding: 10px 5px; font-size: 11px; color: #555; border-bottom: 1px solid var(--m-border); }
        td { padding: 8px 5px; text-align: center; font-size: 15px; border-bottom: 1px solid #1a2028; height: 42px; color: #eee; }
        .control-panel { background: #05070a; border-radius: 20px 20px 0 0; padding: 15px 15px 10px; flex-shrink: 0; border-top: 1px solid var(--m-border); }

        /* --- åˆ†é  2: ç¢¼éŒ¶å°ˆå±¬ --- */
        #swDisplay { font-family: "Courier New", monospace; font-size: clamp(3.2rem, 12vw, 4.5rem); font-weight: 800; color: #fff; text-align: center; margin: 10px 0; }
        .sw-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .sw-actions button { padding: 14px; border: none; border-radius: 12px; font-size: 15px; font-weight: 900; color: #fff; }
        .btn-start { background: var(--m-secondary); color: #000 !important; }
        .btn-pause { background: var(--m-orange); color: #000 !important; }
        .btn-lap { background: var(--m-primary); }
        .btn-stop { background: var(--m-red); }
        .btn-lock { opacity: 0.15; pointer-events: none; filter: grayscale(1); }
        
        /* --- åˆ†é  3: ç™¾åˆ†æ¯”å°ˆå±¬ --- */
        .time-display { display: flex; gap: 6px; background: #05070a; padding: 10px; border-radius: 16px; border: 1px solid var(--m-border); margin-bottom: 8px; }
        .unit-box { flex: 1; text-align: center; border: 1.5px solid var(--m-border); border-radius: 10px; padding: 6px 0; font-size: 22px; font-weight: 800; }
        .unit-box.active { border-color: var(--m-primary); background: rgba(0,162,255,0.1); color: var(--m-primary); }
        .unit-box span { font-size: 10px; display: block; color: #555; }
        .range-wrapper { position: relative; width: 100%; height: 46px; background: #05070a; border-radius: 23px; border: 1px solid var(--m-border); margin: 5px 0; }
        input[type=range] { width: 100%; -webkit-appearance: none; background: transparent; height: 100%; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 80px; height: 36px; background: var(--m-primary); border-radius: 18px; border: 2px solid #fff; }
        .bubble { position: absolute; pointer-events: none; top: 50%; transform: translate(-50%, -50%); z-index: 4; color: #000; font-weight: 900; }

        /* --- éµç›¤é€šç”¨ --- */
        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; }
        .keypad button, .key { background: var(--key-bg); height: 50px; border: 1px solid #2d333b; border-radius: 12px; color: #fff; font-size: 20px; font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .key-del { color: var(--m-red) !important; }
        .key-ok { background: var(--m-primary) !important; color: #fff !important; }

        /* --- åˆ†é  4: å¤–éƒ¨ç¶²é  --- */
        .external-frame { width: 100%; height: 100%; border: none; background: #fff; }
    </style>
</head>
<body>

<div class="app-shell">
    <div class="content-area">
        
        <div class="page-container active" id="p1">
            <header class="page-header"><h1>èª²ç¨‹è¦åŠƒ</h1></header>
            <div class="main-content">
                <div class="table-container">
                    <table id="planTable">
                        <thead><tr><th style="width:20%">çµ„æ•¸</th><th>å…§å®¹</th><th style="width:25%">å¼·åº¦</th></tr></thead>
                        <tbody id="planBody">
                            <tr><td colspan="3" style="padding:40px; color:#555;">é»æ“Šä¸‹æ–¹é–‹å§‹è¦åŠƒ...</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="control-panel">
                    <button style="width:100%; padding:15px; border-radius:12px; border:none; background:var(--m-primary); color:#fff; font-weight:900;" onclick="alert('è¦åŠƒé‚è¼¯å·²å°±ç·’')">ï¼‹ æ–°å¢è¨“ç·´èª²é …</button>
                </div>
            </div>
        </div>

        <div class="page-container" id="p2">
            <header class="page-header"><h1>åˆ†æ®µè¨˜éŒ„</h1></header>
            <div class="main-content">
                <div class="table-container" id="swScroll">
                    <table>
                        <thead><tr><th style="width:12%">æ®µ</th><th style="width:32%">ç¸½æ™‚é–“</th><th style="width:25%">åˆ†æ®µ</th><th style="width:18%">ç§’å·®</th><th style="width:13%"></th></tr></thead>
                        <tbody id="swTbody"></tbody>
                    </table>
                </div>
                <div class="control-panel">
                    <div id="swDisplay">00:00.00</div>
                    <div class="sw-actions">
                        <button id="swStart" class="btn-start" onclick="stopwatch.start()">é–‹å§‹</button>
                        <button id="swPause" class="btn-pause" onclick="stopwatch.pause()">æš«åœ</button>
                        <button id="swLap" class="btn-lap" onclick="stopwatch.lap()">åˆ†æ®µ</button>
                        <button id="swStop" class="btn-stop" onclick="stopwatch.stop()">çµæŸ</button>
                    </div>
                    <button onclick="stopwatch.reset()" style="width:100%; background:none; border:none; color:#444; font-size:11px; margin-top:10px; font-weight:bold;">é‡ç½®ç¢¼éŒ¶æ•¸æ“š</button>
                </div>
            </div>
        </div>

        <div class="page-container" id="p3">
             ```
<header class="page-header"><h1>ç§’æ•¸ç™¾åˆ†æ¯”è¨ˆç®—</h1></header>
            <div class="main-content">
                <div class="time-display">
                    <div id="box-0" class="unit-box active" onclick="focusBox(0)">00<span>åˆ†</span></div>
                    <div id="box-1" class="unit-box" onclick="focusBox(1)">00<span>ç§’</span></div>
                    <div id="box-2" class="unit-box" onclick="focusBox(2)">00<span>æ¯«ç§’</span></div>
                </div>
                <div class="range-wrapper">
                    <div class="bubble" id="athleteBubble">100%</div>
                    <input type="range" id="mainRange" min="50" max="110" step="1" value="100" oninput="calculatePercent()">
                </div>
                <div id="resText" style="background:var(--m-primary); padding:15px; border-radius:15px; text-align:center; font-size:42px; font-weight:900; color:#000; box-shadow:0 0 15px rgba(0,162,255,0.3);">00:00.00</div>
                
                <div class="table-container" style="margin-top:10px;">
                    <table id="percentTable"><thead><tr><th>ç™¾åˆ†æ¯”</th><th>æ›ç®—æ™‚é–“</th></tr></thead><tbody id="coachTableBody"></tbody></table>
                </div>
            </div>
            <div class="numpad-wrapper" style="background:#05070a; padding:10px; border-top:1px solid var(--m-border);">
                <div class="keypad">
                    <button onclick="pressNum(7)">7</button><button onclick="pressNum(8)">8</button><button onclick="pressNum(9)">9</button>
                    <button onclick="pressNum(4)">4</button><button onclick="pressNum(5)">5</button><button onclick="pressNum(6)">6</button>
                    <button onclick="pressNum(1)">1</button><button onclick="pressNum(2)">2</button><button onclick="pressNum(3)">3</button>
                    <button class="key-del" onclick="pressNum('C')">AC</button><button onclick="pressNum(0)">0</button><button class="key-del" onclick="pressNum('X')">âŒ«</button>
                </div>
            </div>
        </div>

        <div class="page-container" id="p4">
            <iframe src="https://swim.orz.tw/?source=pwa" class="external-frame"></iframe>
        </div>

    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchTab(1)"><div class="nav-icon">ğŸ“Š</div><div>è¦åŠƒ</div></div>
        <div class="nav-item" onclick="switchTab(2)"><div class="nav-icon">â±ï¸</div><div>è¨˜éŒ„</div></div>
        <div class="nav-item" onclick="switchTab(3)"><div class="nav-icon">ğŸ”¢</div><div>è¨ˆç®—</div></div>
        <div class="nav-item" onclick="switchTab(4)"><div class="nav-icon">ğŸŒ</div><div>è³‡æº</div></div>
    </nav>
</div>

<script>
    /* --- 1. å…¨åŸŸåˆ†é é‚è¼¯ --- */
    function switchTab(idx) {
        document.querySelectorAll('.page-container').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById('p' + idx).classList.add('active');
        document.querySelectorAll('.nav-item')[idx-1].classList.add('active');
        if (navigator.vibrate) navigator.vibrate(5);
        if(idx === 3) renderCoachTable(); 
    }

    /* --- 2. ç¢¼éŒ¶åˆ†æ®µé‚è¼¯ (SW) --- */
    let sw = { 
        start: 0, elapsed: 0, timer: null, laps: [], lastLap: 0, status: 'stop' 
    };
    const stopwatch = {
        update() {
            let now = Date.now() - sw.start + sw.elapsed;
            document.getElementById('swDisplay').innerText = formatTime(now);
        },
        start() {
            if(sw.status === 'running') return;
            sw.status = 'running';
            sw.start = Date.now();
            sw.timer = setInterval(this.update, 10);
            this.toggleBtns();
        },
        pause() {
            clearInterval(sw.timer);
            sw.elapsed += Date.now() - sw.start;
            sw.status = 'paused';
            this.toggleBtns();
        },
        stop() {
            this.pause();
            sw.status = 'stop';
            this.toggleBtns();
        },
        lap() {
            let now = Date.now() - sw.start + sw.elapsed;
            let split = now - sw.lastLap;
            let diff = sw.laps.length > 0 ? now - sw.laps[sw.laps.length-1].total : 0;
            sw.laps.push({ total: now, split: split });
            sw.lastLap = now;
            this.renderLaps();
        },
        reset() {
            if(!confirm("ç¢ºå®šé‡ç½®æ‰€æœ‰æ•¸æ“šï¼Ÿ")) return;
            clearInterval(sw.timer);
            sw = { start: 0, elapsed: 0, timer: null, laps: [], lastLap: 0, status: 'stop' };
            document.getElementById('swDisplay').innerText = "00:00.00";
            document.getElementById('swTbody').innerHTML = "";
            this.toggleBtns();
        },
        toggleBtns() {
            document.getElementById('swStart').className = sw.status === 'running' ? 'btn-lock' : 'btn-start';
            document.getElementById('swPause').className = sw.status === 'running' ? 'btn-pause' : 'btn-lock';
        },
        renderLaps() {
            let html = "";
            sw.laps.slice().reverse().forEach((l, i) => {
                let idx = sw.laps.length - i;
                html += `<tr><td>${idx}</td><td style="color:var(--m-primary); font-weight:800">${formatTime(l.total)}</td>
                        <td style="color:var(--m-secondary)">${formatTime(l.split)}</td><td>--</td><td>ğŸ—‘ï¸</td></tr>`;
            });
            document.getElementById('swTbody').innerHTML = html;
        }
    };

    /* --- 3. ç™¾åˆ†æ¯”è¨ˆç®—é‚è¼¯ --- */
    let curFocus = 0, pVals = ["00", "00", "00"], isNew = true;
    function focusBox(i) { curFocus = i; isNew = true; updatePDisplay(); }
    function updatePDisplay() {
        for (let i = 0; i < 3; i++) {
            const b = document.getElementById('box-' + i);
            b.classList.toggle('active', i === curFocus);
            b.childNodes[0].nodeValue = pVals[i];
        }
    }
    function pressNum(k) {
        if (k === 'C') { pVals = ["00","00","00"]; curFocus = 0; }
        else if (k === 'X') { pVals[curFocus] = "00"; }
        else {
            if (isNew) { pVals[curFocus] = "0" + k; isNew = false; }
            else { pVals[curFocus] = (pVals[curFocus].slice(-1) + k).slice(-2); if(curFocus < 2){curFocus++; isNew=true;} }
        }
        updatePDisplay(); calculatePercent(); renderCoachTable();
    }
    function calculatePercent() {
        const ms = (parseInt(pVals[0])*60000)+(parseInt(pVals[1])*1000)+(parseInt(pVals[2])*10);
        const pct = document.getElementById('mainRange').value;
        const res = ms * (2 - pct / 100);
        document.getElementById('resText').innerText = formatTime(res);
        document.getElementById('athleteBubble').innerText = pct + '%';
        document.getElementById('athleteBubble').style.left = `calc(40px + ${(pct-50)/60} * (100% - 80px))`;
    }
    function renderCoachTable() {
        const ms = (parseInt(pVals[0])*60000)+(parseInt(pVals[1])*1000)+(parseInt(pVals[2])*10);
        let html = "";
        for(let i=110; i>=50; i--) {
            html += `<tr><td>${i}%</td><td style="color:var(--m-primary); font-weight:800">${formatTime(ms*(2-i/100))}</td></tr>`;
        }
        document.getElementById('coachTableBody').innerHTML = html;
    }

    /* --- é€šç”¨å·¥å…· --- */
    function formatTime(t) {
        if(t < 0) t = 0;
        let m = Math.floor(t/60000), s = Math.floor((t%60000)/1000), ms = Math.floor((t%1000)/10);
        return `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}.${ms.toString().padStart(2,'0')}`;
    }

    // åˆå§‹åŒ–
    window.onload = () => { renderCoachTable(); updatePDisplay(); };
</script>
</body>
</html>
